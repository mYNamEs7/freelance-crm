# Кэширование

## Бэкенд (FastAPI)

Используется **in-memory TTL кэш** (`app/cache.py`, библиотека `cachetools`):

- Кэшируются ответы GET `/clients/all` и GET `/orders/all/{client_id}`.
- TTL 5 минут, до 500 ключей.
- При добавлении/изменении/удалении клиентов и заказов кэш по этому пользователю сбрасывается.

**Отдельный Cache Store на Railway не нужен.** Кэш хранится в памяти процесса приложения. Этого достаточно, если у вас один инстанс сервиса. Redis или другой внешний кэш имеет смысл подключать только если:

- запускаете несколько реплик (несколько инстансов бэкенда), и нужен общий кэш;
- нужен кэш, сохраняющийся между деплоями/рестартами.

## Фронтенд (React)

Используется **TanStack React Query**:

- Кэширует ответы API в памяти браузера.
- `staleTime: 1 мин` — в течение минуты повторные запросы по тому же ключу не уходят на сервер.
- `gcTime: 5 мин` — неиспользуемые данные удаляются из кэша через 5 минут.
- После мутаций (добавить/изменить/удалить) вызывается `invalidateQueries`, чтобы подтянуть свежие данные.

---

**Итог:** для текущей схемы (один инстанс бэкенда на Railway) **отдельно деплоить cache store (Redis и т.п.) не нужно.**
